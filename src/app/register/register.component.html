<div class="container">
    <div class="row py-1 mt-4 align-items-center">
        <!-- For Demo Purpose -->
        <div class="col-md-5 pr-lg-5 mb-5 mb-md-0">


            <img class="img-fluid rounded-2" src="./../../assets/images/register.jpg" alt="..." />
            <h1>Create an Account</h1>
            <p class="font-italic text-muted mb-0">
                Information collected will only be used to maintain your account. Existing users <a routerLink="/login"> Login </a>
            </p>



        </div>

        <div class="col-md-7 col-lg-7 ml-auto">

            <div class="text-center">
                <h4>Create Your GrowWell Account In Just 3 Simple Steps <img src="./../../assets/images/typing.gif" height="55px"></h4>
            </div>
            <br/>
            <div class="container">
                <div class="stepwizard">
                    <div class="stepwizard-row setup-panel">
                        <div class="stepwizard-step">
                            <a href="#step-1" type="button" class="btn btn-primary btn-circle"><i class="fa fa-user fa-lg"></i></a>
                            <p>Personal</p>
                        </div>
                        <div class="stepwizard-step">
                            <a href="#step-2" type="button" class="btn btn-default btn-circle" disabled="disabled"><i class="fa fa-address-card fa-lg"></i></a>
                            <p>Address</p>
                        </div>
                        <div class="stepwizard-step">
                            <a href="#step-3" type="button" class="btn btn-default btn-circle" disabled="disabled"><i class="fa fa-key fa-lg"></i></a>
                            <p>Credentials</p>
                        </div>

                    </div>
                    <br/>
                </div>
                <form role="form" [formGroup]="registrationForm" *ngIf="!userAdded">
                    <div class="row setup-content" id="step-1">
                        <div class="col-xs-12">
                            <div class="col-md-12">
                                <h3> Personal Details </h3>
                                <div class="row">

                                    <div class="col-md-6 form-group">


                                        <!-- <label class="control-label">First Name</label> -->
                                        <input maxlength="100" type="text" required="required" class="form-control mb-3" formControlName="firstname" size="80" placeholder="Enter First Name Here" />

                                        <div *ngIf="registrationForm.get('firstname').invalid &&registrationForm.get('firstname').touched" class="alert alert-danger">
                                            <small>First Name field is required</small>
                                        </div>


                                    </div>

                                    <div class="col-md-6 form-group">



                                        <input maxlength="100" type="text" required="required" class="form-control mb-3" formControlName="lastname" placeholder="Enter Last Name Here" />

                                        <div *ngIf="registrationForm.get('lastname').invalid &&registrationForm.get('lastname').touched" class="alert alert-danger">
                                            <small>Last Name field is required</small>
                                        </div>


                                    </div>

                                    <div class="col-md-12 form-group">

                                        <input maxlength="100" type="email" pattern="[a-zA-Z0-9.-_]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}" required="required" formControlName="email" class="form-control mb-3" placeholder="Enter Email Here" />

                                        <div *ngIf="registrationForm.get('email').invalid &&registrationForm.get('email').touched" class="alert alert-danger">
                                            <small>Enter Valid Email</small>
                                        </div>


                                    </div>

                                    <div class="col-md-12 form-group">



                                        <input maxlength="10" type="text" formControlName="pan" required="required" class="form-control mb-3" placeholder="Enter PAN Number Here" />

                                        <div *ngIf=" registrationForm.get('pan').invalid &&registrationForm.get('pan').touched">
                                            <div *ngIf="registrationForm.get('pan').errors?.required" class="alert alert-danger">
                                                <small>Pan number is required</small>

                                            </div>
                                            <div *ngIf="registrationForm.get('pan').errors?.minlength" class="alert alert-danger">
                                                <small>Pan Number must be 10 characters</small>

                                            </div>

                                        </div>
                                    </div>

                                </div>








                                <br/>
                                <button type="button" class="btn btn-labeled btn-primary nextBtn pull-right">Next<span class="btn-label"><i class="fa fa-caret-right"></i></span></button>

                            </div>
                        </div>
                    </div>
                    <div class="row setup-content" id="step-2">
                        <div class="col-xs-12">
                            <div class="col-md-12">
                                <h3>Address Details</h3>

                                <div class="row">



                                    <div class="col-md-12 form-group">

                                        <input maxlength="200" type="text" formControlName="address01" required="required" class="form-control mb-3" placeholder="Enter Address Line 1 Here" />

                                        <div *ngIf="registrationForm.get('address01').invalid &&registrationForm.get('address01').touched" class="alert alert-danger">
                                            <small>Address field is required</small>
                                        </div>
                                    </div>
                                    <div class="col-md-12 form-group">

                                        <input maxlength="200" type="text" formControlName="address02" required="required" class="form-control mb-3" placeholder="Enter Address Line 2 Here" />
                                        <div *ngIf="registrationForm.get('address02').invalid && registrationForm.get('address02').touched" class="alert alert-danger">
                                            <small>Address field is required</small>
                                        </div>


                                    </div>

                                    <div class="col-md-4 form-group">
                                        <select class="form-control" formControlName="country" aria-label="Default select example" (change)="getState($event.target.value)" required="required">
                                    <option [disabled]="true" hidden [value]="null">Select Country</option>
                                    <option *ngFor="let country of countries" 
                                    [value]="country" 
                                    >
                                  {{country}}
                                </option>
                                  </select>
                                    </div>

                                    <!-- <button type="button" (click)="getState('Ankit')"></button> -->

                                    <div class="col-md-4 form-group">
                                        <select class="form-control" formControlName="state" aria-label="Default select example" required="required">
                                    <option [disabled]="true" hidden [value]="null">Select State</option>
                                    <option *ngFor="let state of states" 
                                    [value]="state" 
                                    >
                                  {{state}}
                                </option>
                                  </select>
                                    </div>

                                    <div class="col-md-4 form-group">
                                        <input maxlength="6" type="text" formControlName="postalcode" required="required" class="form-control" onkeypress="return (event.charCode !=8 && event.charCode ==0 || (event.charCode >= 48 && event.charCode <= 57))" placeholder="Enter Pincode Here" />

                                        <div *ngIf=" registrationForm.get('postalcode').invalid &&registrationForm.get('postalcode').touched">
                                            <div *ngIf="registrationForm.get('postalcode').errors?.required" class="alert alert-danger">
                                                <small>Zip is required</small>

                                            </div>
                                            <div *ngIf="registrationForm.get('postalcode').errors?.minlength" class="alert alert-danger">
                                                <small>Zip must be 6 digits</small>

                                            </div>

                                        </div>

                                    </div>

                                </div>
                                <br/>
                                <!-- <button class="btn btn-danger prevBtn btn-lg pull-left" type="button" >Previous</button> -->

                                <button type="button" class="btn btn-labeled btn-danger prevBtn pull-left"><span class="btn-labelleft"><i class="fa fa-caret-left"></i></span>Previous</button>

                                <button type="button" class="btn btn-labeled btn-primary nextBtn pull-right">Next<span class="btn-label"><i class="fa fa-caret-right"></i></span></button>
                            </div>
                        </div>
                    </div>
                    <div class="row setup-content" id="step-3">
                        <div class="col-xs-12">
                            <div class="col-md-12">
                                <h3>Create Login Credentials</h3>

                                <div class="row">

                                    <div class="col-md-12 form-group">

                                        <input maxlength="12" type="text" formControlName="username" required="required" class="form-control mb-3" placeholder="Enter Username Here" />

                                        <div *ngIf="
            registrationForm.get('username').invalid &&
            registrationForm.get('username').touched
          ">
                                            <div *ngIf="registrationForm.get('username').errors?.required" class="alert alert-danger">
                                                <small>Username is required</small>
                                            </div>
                                            <div *ngIf="registrationForm.get('username').errors?.minlength" class="alert alert-danger">
                                                <small>Minimum 6 characters required</small>
                                            </div>
                                        </div>


                                    </div>

                                    <div class="col-md-12 form-group">


                                        <select class="form-control mb-3" formControlName="type" aria-label="Default select example" required="required">
                                    <option [disabled]="true" hidden [value]="null">Select User Type</option>
                                    <option value="Individual">Individual</option>
                                    <option value="Institution">Institution</option>
                                  </select>



                                    </div>


                                    <div class="col-md-6 form-group">

                                        <input maxlength="20" type="password" formControlName="password" required="required" class="form-control mb-3" placeholder="Enter Password Here" />

                                        <div *ngIf=" registrationForm.get('password').invalid && registrationForm.get('password').touched" class="alert alert-danger">
                                            <small>Password is required</small>
                                        </div>

                                    </div>

                                    <div class="col-md-6 form-group">

                                        <input maxlength="20" type="password" formControlName="confirmpassword" required="required" class="form-control mb-3" placeholder="Confirm Password Here" [class.is-invlaid]="registrationForm.errors?.mismatch" />

                                        <div *ngIf="registrationForm.errors?.mismatch" class="alert alert-danger">
                                            <small>password mismatch</small>
                                        </div>
                                    </div>

                                </div>

                                <div *ngIf="userExists">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h5>User already exists</h5>
                                        </div>
                                        <div class="col-md-6">

                                            <small class="alert alert-danger">Email/Username Already Exists</small>

                                        </div>
                                    </div>

                                    <br/>

                                </div>
                                <div *ngIf="errors">System Unavailable,try again later!</div>


                                <button type="button" class="btn btn-labeled btn-danger prevBtn pull-left"><span class="btn-labelleft"><i class="fa fa-caret-left"></i></span>Previous</button>

                                <button type="submit" [disabled]="registrationForm.invalid" (click)="onSubmit()" class="btn btn-labeled btn-success nextBtn pull-right">Finish<span class="btn-label"><i class="fa fa-thumbs-up"></i></span></button>
                            </div>
                        </div>
                    </div>

                </form>
                <div class="container">
                    <div class="container-fluid">
                        <div *ngIf="userAdded" class="text-center">
                            <h2>Registration Complete</h2>
                            <h3>You Have Successfully Created your GrowWell Account</h3>

                            <br />
                            <br />
                            <button class="btn btn-primary" routerLink="/login">Login</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
















    </div>

</div>